<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Verus Connect — Login Example</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: #0f0f1a;
      color: #e0e0e0;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .container { max-width: 420px; width: 100%; padding: 24px; }
    h1 { font-size: 24px; margin-bottom: 8px; text-align: center; }
    .subtitle { color: #888; font-size: 14px; text-align: center; margin-bottom: 32px; }
    button {
      display: block;
      width: 100%;
      padding: 14px;
      border: none;
      border-radius: 12px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: opacity 0.15s;
    }
    button:hover { opacity: 0.85; }
    button:disabled { opacity: 0.5; cursor: not-allowed; }
    #login-btn { background: #3165D4; color: #fff; margin-bottom: 16px; }
    #result {
      margin-top: 20px;
      padding: 16px;
      background: #1a1a2e;
      border-radius: 12px;
      font-size: 14px;
      display: none;
    }
    #result.show { display: block; }
    .label { color: #888; font-size: 12px; margin-bottom: 4px; }
    .value { font-family: monospace; word-break: break-all; margin-bottom: 12px; }
    .success { color: #4ade80; }
    .error { color: #f87171; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Verus Connect Demo</h1>
    <p class="subtitle">Login with your VerusID</p>

    <button id="login-btn">Login with VerusID</button>

    <div id="result">
      <div class="label">Status</div>
      <div class="value" id="r-status"></div>
      <div class="label">Method</div>
      <div class="value" id="r-method"></div>
      <div class="label">i-Address</div>
      <div class="value" id="r-address"></div>
      <div class="label">Name</div>
      <div class="value" id="r-name"></div>
    </div>
  </div>

  <script type="module">
    import { VerusConnect } from '../dist/index.js';

    // Just point to your server — that's it
    const vc = new VerusConnect({
      appName: 'Demo App',
      serverUrl: '/auth/verus',
    });

    const btn = document.getElementById('login-btn');
    const resultEl = document.getElementById('result');

    btn.addEventListener('click', async () => {
      btn.disabled = true;
      btn.textContent = 'Connecting\u2026';

      try {
        const result = await vc.login();

        document.getElementById('r-status').textContent = 'Authenticated';
        document.getElementById('r-status').className = 'value success';
        document.getElementById('r-method').textContent = result.method;
        document.getElementById('r-address').textContent = result.iAddress;
        document.getElementById('r-name').textContent = result.friendlyName || '(not set)';
        resultEl.className = 'show';
      } catch (err) {
        if (err.name === 'AbortError') {
          // User cancelled — do nothing
        } else {
          document.getElementById('r-status').textContent = err.message;
          document.getElementById('r-status').className = 'value error';
          resultEl.className = 'show';
        }
      } finally {
        btn.disabled = false;
        btn.textContent = 'Login with VerusID';
      }
    });
  </script>
</body>
</html>
